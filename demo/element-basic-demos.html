<dom-module id="element-basic-demos">
  <template>
    <style include="vaadin-component-demo-shared-styles">
      :host {
        display: block;
      }
    </style>

    <h3>Known WTFs (to be resolved)</h3>
    <ul>
      <li>
        <p>
          This snippet does not work as expected:
          <code>
            <pre>&lt;vaadin-router&gt;
  &lt;vaadin-route path="/" component="x-home-view"&gt;&lt;/vaadin-route&gt;
  &lt;vaadin-route path="/users" component="x-user-list"&gt;&lt;/vaadin-route&gt;
&lt;/vaadin-router&gt;</pre>
          </code>
          One would expect that the x-home-view component gets rendered for the '/' path,
          and the x-user-list component - for the '/users' path.
        </p>
        <p>
          But the actual is that the home view is rendered for both paths. The reason is
          that since the '/' route does not have children, the match is prefix based -
          any path starting with a '/' would match the first route. And since the matching
          logic picks the first match and does not look further, the home view is always
          rendered.
        </p>
        <p>
          Workaround: reverse the order of routes - list the more specific `/users` before
          the more generic `/`.
        </p>
      </li>
      <li>
        <p>
          This snippet does not work as expected:
          <code>
            <pre>&lt;vaadin-router&gt;
  &lt;vaadin-route path="/users"&gt;
    &lt;vaadin-route path="/" component="x-user-list"&gt;&lt;/vaadin-route&gt;
    &lt;vaadin-route path="/:user" component="x-user-profile"&gt;&lt;/vaadin-route&gt;
  &lt;/vaadin-route&gt;
&lt;/vaadin-router&gt;</pre>
          </code>
          One would expect that the x-user-list component gets rendered for the '/users' path,
          and the x-user-profile component - for the '/users/sam' path.
        </p>
        <p>
          But the actual is that the '/users' path results in a 404 (no match). The reason is
          that after matching the parent route (with the path='/usres') what remains of the
          pathname is an empty string. And that does not match the '/' path specified for the
          x-user-list child route.
        </p>
        <p>
          Workaround: set the child route's path to an empty string instead of `/`.
        </p>
      </li>
      <li>
        <p>
          The Route class is exported as <code>Vaadin.Router.Route</code> instead of <code>Vaadin.Route</code>.
          It's an open issue - how to configure Rollup to generate an UMD bundle that appends
          multiple classes to the Vaadin namespace.
        </p>
        <p>
          The current export creates the Vaadin namespace object if it noes not exist, and appends to it if it
          exists. However, this approach does not allow exporting more than one class (e.g. Vaadin.Router and
          Vaadin.Route):
          <code>
            <pre>{
  input: 'index.js',
  output: {
    name: 'Vaadin.Router',
    file: pkg.browser,
    format: 'umd'
  }
}</pre>
          </code>
          <code>
            <pre>import {Router} from './src/router.js';
import {Route} from './src/route';

Router.Route = Route;
export default Router;</pre>
          </code>
        </p>
        <p>
          The naive approach to export two classes into the Vaadin namespace would be setting the export module
          name to Vaadin, and using named export declarations:
          <code>
            <pre>{
  input: 'index.js',
  output: {
    name: 'Vaadin',
    file: pkg.browser,
    format: 'umd'
  }
}</pre>
          </code>
          <code>
            <pre>export {Route} from './src/route.js';
export {Router} from './src/router.js';</pre>
          </code>
          However, the UMD bundle generated by rollup in this case would always override the global Vaadin
          namespace object if it exists when the bundle gets loaded. This is not acceptable becase it deletes
          exports made in Vaadin HTML imports.
        </p>
        <p>
          Workaround: make the Router class a default export and expose the Route class as Router.Route
        </p>
      </li>
    </ul>

    <h3>Basic</h3>
    <p>Use <code>&lt;vaadin-router-link&gt;</code> to create HTML5 links that change the browser URL
      without page reload and <code>&lt;vaadin-route&gt;</code> to define what should be rendered for
      a given route. Wrap all routes into a <code>&lt;vaadin-router&gt;</code> element.</p>
    <p>The content of a route can be defined as an inline template or with the <code>component</code>
      property of a <code>&lt;vaadin-route&gt;</code> element.</p>
    <vaadin-demo-snippet id="element-basic-demos-basic" iframe-src="iframe.html">
      <template preserve-content>
        <nav>
          <vaadin-router-link href="/">Home</vaadin-router-link>
          <vaadin-router-link href="/users">Users</vaadin-router-link>
        </nav>
        <vaadin-router>
          <vaadin-route path="/users" component="x-user-list"></vaadin-route>
          <vaadin-route path="/">
            <template>
              <h1>Home</h1>
            </template>
          </vaadin-route>
        </vaadin-router>
      </template>
    </vaadin-demo-snippet>

    <h3>Highlight the link to the current route</h3>
    <p>If the current route matches the target route of a <code>&lt;vaadin-router-link&gt;</code>,
      the link gets the <code>active</code> attribute. Use this attribute in a CSS selector to style
      the currently active link differently.</p>
    <vaadin-demo-snippet id="element-basic-demos-styled-link" iframe-src="iframe.html">
      <template preserve-content>
        <style>
          vaadin-router-link[active] {
            font-weight: bold;
            font-size: 120%;
          }
        </style>
        <nav>
          <vaadin-router-link href="/">Home</vaadin-router-link>
          <vaadin-router-link href="/users">Users</vaadin-router-link>
        </nav>
        <vaadin-router>
          <vaadin-route path="/users" component="x-user-list"></vaadin-route>
          <vaadin-route path="/" component="x-home-view"></vaadin-route>
        </vaadin-router>
      </template>
    </vaadin-demo-snippet>

    <h3>Route parameters</h3>
    <p>A route path definition can include one or more parameters. They are bound to the route
      component properties when it gets rendered.</p>
    <vaadin-demo-snippet id="element-basic-demos-parameters" iframe-src="iframe.html">
      <template preserve-content>
        <nav>
          <vaadin-router-link href="/">Home</vaadin-router-link>
          <vaadin-router-link href="/users/kim">Kim</vaadin-router-link>
          <vaadin-router-link href="/users/jane">Jane</vaadin-router-link>
        </nav>
        <vaadin-router>
          <vaadin-route path="/users/:user" component="x-user-profile"></vaadin-route>
          <vaadin-route path="/" component="x-home-view"></vaadin-route>
        </vaadin-router>
      </template>
    </vaadin-demo-snippet>

  </template>
  <script>
    class ElementBasicDemos extends DemoReadyEventEmitter(ElementDemo(Polymer.Element)) {
      static get is() {
        return 'element-basic-demos';
      }
    }
    customElements.define(ElementBasicDemos.is, ElementBasicDemos);
  </script>
</dom-module>
