<dom-module id="vaadin-router-prevent-navigation-demos">
  <template>
    <style include="vaadin-component-demo-shared-styles">
      :host {
        display: block;
      }
    </style>

    <h3>Prevent Navigation Using <code>onBeforeLeave</code> Lifecycle Callback</h3>
    <p>
      The <code>onBeforeLeave</code> lifecycle callback on the component can be used to prevent navigation
      from it. In order to do this, the callback must return an object with the <code>cancel</code> property set to
      <code>true</code>. This is intended to protect the user from switching to the different route without performing
      some needed actions while staying within current view. Note that the user is still able to copy the URL
      of the anchor element, which it has been prevented to navigate to, and open it manually in the browser.
    </p>
    <vaadin-demo-snippet id="vaadin-router-prevent-navigation-demos-1" iframe-src="iframe.html">
      <template preserve-content="">
        <dom-module id="x-user-manage">
          <template>
            <h1>Manage user</h1>
            <p>User name: [[route.params.user]]</p>
            <a href="/user/delete">Delete user</a>
          </template>
        </dom-module>
        <div id="outlet"></div>
        <script type="module">
          Polymer({
            is: 'x-user-manage',
            onBeforeLeave: function(context) {
              if (context.pathname.indexOf('user/delete') > 0) {
                return confirm('Are you sure you want to delete this user?') || context.cancel();
              }
            }
          });
          // import {Router} from '@vaadin/router';
          const {Router} = window.Vaadin;

          const router = new Router(document.getElementById('outlet'));
          router.setRoutes([
            {path: '/', redirect: '/user/guest/manage'},
            {path: '/user/:user/manage', component: 'x-user-manage'},
            {path: '/user/delete', component: 'x-user-deleted'}
          ]);

          Polymer({
            is: 'x-user-deleted',
            ready: function() {
              this.innerHTML = 'User has been deleted.';
            }
          });
        </script>
      </template>
    </vaadin-demo-snippet>

    <h3>Prevent Navigation Using <code>onBeforeEnter</code> Lifecycle Callback</h3>
    <p>
      The <code>onBeforeEnter</code> lifecycle callback on the component can be used to prevent navigation
      to it. In order to do this, the callback must return an object with the <code>cancel</code> property set to
      <code>true</code>. To allow entering, no return result should be returned. Note that <code>true</code> or
      <code>false</code> are not considered as a valid results, and only the explicit cancelling is supported.
    </p>
    <vaadin-demo-snippet id="vaadin-router-prevent-navigation-demos-2" iframe-src="iframe.html">
      <template preserve-content="">
        <a href="/">Home</a>
        <a href="/danger">Danger</a>
        <div id="outlet"></div>
        <script type="module">
          Polymer({
            is: 'x-dangerous',
            onBeforeEnter: function(context) {
              if (!confirm('Do you really want to know it?')) {
                return context.cancel();
              }
            }
          });
          // import {Router} from '@vaadin/router';
          const {Router} = window.Vaadin;

          const router = new Router(document.getElementById('outlet'));
          router.setRoutes([
            {path: '/', component: 'x-home-view'},
            {path: '/danger', component: 'x-dangerous'}
          ]);
        </script>
        <dom-module id="x-dangerous">
          <template>
            <h1>Santa Claus Doesn't Exist</h1>
            <p>Sorry.</p>
          </template>
        </dom-module>
      </template>
    </vaadin-demo-snippet>

  </template>
  <script>var VaadinRouterPreventNavigationDemos=function(_DemoReadyEventEmitte){babelHelpers.inherits(VaadinRouterPreventNavigationDemos,_DemoReadyEventEmitte);function VaadinRouterPreventNavigationDemos(){babelHelpers.classCallCheck(this,VaadinRouterPreventNavigationDemos);return babelHelpers.possibleConstructorReturn(this,(VaadinRouterPreventNavigationDemos.__proto__||Object.getPrototypeOf(VaadinRouterPreventNavigationDemos)).apply(this,arguments))}babelHelpers.createClass(VaadinRouterPreventNavigationDemos,null,[{key:"is",get:function get(){return"vaadin-router-prevent-navigation-demos"}}]);return VaadinRouterPreventNavigationDemos}(DemoReadyEventEmitter(ElementDemo(Polymer.Element)));customElements.define(VaadinRouterPreventNavigationDemos.is,VaadinRouterPreventNavigationDemos);</script>
</dom-module>
