<dom-module id="vaadin-router-redirect-demos">
  <template>
    <style include="vaadin-component-demo-shared-styles">
      :host {
        display: block;
      }
    </style>

    <h3>Unconditional Redirects</h3>
    <p>
      Vaadin.Router supports the <code>redirect</code> property on the route
      objects, allowing to unconditionally redirect users from one path to
      another. The valid values are a path string or a pattern in the same
      format as used for the <code>path</code> property.
    </p>
    <p>
      The original path is not stored as the <code>window.history</code> entry
      and cannot be reached by pressing the "Back" browser button. Unconditional
      redirects work for routes both with and without parameters.
    </p><p>
      The original path is available to the view Web Component as the
      <code>route.redirectFrom</code> string property, as described in the snippet below.
      <a href="#vaadin-router-route-actions-demos">Route Actions</a> can access
      the original path reference as <code>context.from</code>.
    </p>
    <marked-element>
      <script type="text/markdown">
        ```js
        {
          route: {
            pathname: '/user/guest',
            redirectFrom: '/u/guest', /* the path which redirected */
            params: {
              id: 'guest'
            }
          }
        }
        ```
      </script>
    </marked-element>
    <p>
      Note: If a route has both the <code>redirect</code> and <code>action</code>
      properties, <code>action</code> is executed first and if it does not
      return a result Vaadin.Router proceeds to check the <code>redirect</code>
      property. Other route properties (if any) would be ignored. In that case
      Vaadin.Router would also log a warning to the browser console.
    </p>
    <vaadin-demo-snippet id="vaadin-router-redirect-demos-1" iframe-src="iframe.html">
      <template preserve-content="">
        <a href="/">Home</a>
        <a href="/u/Kim">User profile</a>
        <a href="/data/entity/view/12">Knowledge Base</a>
        <div id="outlet"></div>
        <script type="module">
          // import {Router} from '@vaadin/router';
          const {Router} = window.Vaadin;

          const router = new Router(document.getElementById('outlet'));
          router.setRoutes([
            {path: '/', component: 'x-home-view'},
            {path: '/u/:user', redirect: '/user/:user'},
            {path: '/user/:user', component: 'x-user-profile'},
            {path: '/data/:segments+/:path+', redirect: '/kb/:path+'},
            {path: '/kb/:path+', component: 'x-knowledge-base'},
          ]);
        </script>
      </template>
    </vaadin-demo-snippet>
  </template>
  <script>var VaadinRouterRedirectDemos=function(_DemoReadyEventEmitte){babelHelpers.inherits(VaadinRouterRedirectDemos,_DemoReadyEventEmitte);function VaadinRouterRedirectDemos(){babelHelpers.classCallCheck(this,VaadinRouterRedirectDemos);return babelHelpers.possibleConstructorReturn(this,(VaadinRouterRedirectDemos.__proto__||Object.getPrototypeOf(VaadinRouterRedirectDemos)).apply(this,arguments))}babelHelpers.createClass(VaadinRouterRedirectDemos,null,[{key:"is",get:function get(){return"vaadin-router-redirect-demos"}}]);return VaadinRouterRedirectDemos}(DemoReadyEventEmitter(ElementDemo(Polymer.Element)));customElements.define(VaadinRouterRedirectDemos.is,VaadinRouterRedirectDemos);</script>
</dom-module>
